The Netlify deploy errored, with the following guidance provided:

- Diagnosis
  - Relevant log lines: the package engine warning [#L32-L35], prebuilt-binaries-not-found message [#L45], the V8 symbol compile errors (e.g. SourceLocation not found) [#L87-L95], the make/gyp failure [#L167-L171], and the final install failure [#L180-L182].
  - The root error is here: [#L32-L35] shows isolated-vm@6.0.2 requires Node >=22.0.0 but the build is running Node v20.19.6. Because no prebuilt binary exists for Node 20 the package falls back to compiling native code ([#L45]), which then fails due to V8 API differences (v8::SourceLocation missing) causing C++ compile errors ([#L87-L95]) and make to exit with code 2 ([#L167-L171]).

- Cause
  - isolated-vm v6 targets a newer Node/V8 API (Node ≥22). On Node 20 the headers/ABI differ (SourceLocation symbol not available/changed), so the native addon cannot compile. The package also enforces an engine requirement (EBADENGINE).

- Solution (recommended)
  - Use Node ≥22 in your Netlify build so isolated-vm's prebuilt binaries or compatible headers are used. Steps:
    1. Choose Node 22+ (recommended) and add a Node version file to your repo (or set engines in package.json). Example .nvmrc at repo root:
       ```text
       22
       ```
    2. Alternatively add an engines field to package.json:
       ```json
       "engines": {
         "node": ">=22.0.0"
       }
       ```
    3. Commit and push these changes and re-deploy on Netlify. Netlify will respect .nvmrc or package.json engines to install the matching Node version for the build.
    4. See Netlify docs for changing Node versions: https://docs.netlify.com/configure-builds/manage-dependencies/#node-js-and-javascript

- Other options (if you cannot change Node on Netlify)
  - Downgrade or pin isolated-vm to a version that supports Node 20 (if such a version exists for your use). To do that, verify isolated-vm appears in your package.json (or is a transitive dependency via npm ls isolated-vm), then modify the dependency to a Node20-compatible version and run npm install locally to confirm.
  - Remove/replace the dependency that requires isolated-vm if it is not required at runtime for your site (e.g., replace the package that pulls it in).
  - Note: building native modules on the Netlify image may still fail if the package requires a Node-V8 mismatch — changing Node version on the build image is the most robust fix.

If you want, I can (a) check your repo's package.json to see if isolated-vm is a direct dependency or which package pulls it in, and (b) suggest an exact .nvmrc or engines value to add.

The relevant error logs are:

Line 27: Finished restoring cached corepack dependencies
Line 28: No npm workspaces detected
Line 29: Started restoring cached node modules
Line 30: Finished restoring cached node modules
Line 31: Installing npm packages using npm version 10.8.2
Line 32: npm warn EBADENGINE Unsupported engine {
Line 33: npm warn EBADENGINE   package: 'isolated-vm@6.0.2',
Line 34: npm warn EBADENGINE   required: { node: '>=22.0.0' },
Line 35: npm warn EBADENGINE   current: { node: 'v20.19.6', npm: '10.8.2' }
Line 36: npm warn EBADENGINE }
Line 37: npm error code 1
Line 38: npm error path /opt/build/repo/node_modules/isolated-vm
Line 39: npm error command failed
Line 40: npm error command sh -c prebuild-install || (node-gyp rebuild --release -j max && node-gyp clean)
Line 41: npm error make: Entering directory '/opt/build/repo/node_modules/isolated-vm/build'
Line 42: npm error   CXX(target) Release/obj.target/nortti/src/external_copy/serializer_nortti.o
Line 43: npm error   CXX(target) Release/obj.target/nortti/src/isolate/allocator_nortti.o
Line 44: npm error make: Leaving directory '/opt/build/repo/node_modules/isolated-vm/build'
Line 45: npm error prebuild-install warn install No prebuilt binaries found (target=20.19.6 runtime=node arch=x64 libc= platform=linux)
Line 46: npm error gyp info it worked if it ends with ok
Line 47: npm error gyp info using node-gyp@10.1.0
Line 48: npm error gyp info using node@20.19.6 | linux | x64
Line 49: npm error gyp info find Python using Python version 3.14.1 found at "/opt/buildhome/.local/share/mise/installs/python/3.14.1/bin
Line 50: npm error gyp http GET https://nodejs.org/download/release/v20.19.6/node-v20.19.6-headers.tar.gz
Line 51: npm error gyp http 200 https://nodejs.org/download/release/v20.19.6/node-v20.19.6-headers.tar.gz
Line 52: npm error gyp http GET https://nodejs.org/download/release/v20.19.6/SHASUMS256.txt
Line 53: npm error gyp http 200 https://nodejs.org/download/release/v20.19.6/SHASUMS256.txt
Line 54: npm error gyp info spawn /opt/buildhome/.local/share/mise/installs/python/3.14.1/bin/python3
Line 55: npm error gyp info spawn args [
Line 56: npm error gyp info spawn args '/opt/buildhome/.nvm/versions/node/v20.19.6/lib/node_modules/npm/node_modules/node-gyp/gyp/gyp_mai
Line 57: npm error gyp info spawn args 'binding.gyp',
Line 58: npm error gyp info spawn args '-f',
Line 59: npm error gyp info spawn args 'make',
Line 60: npm error gyp info spawn args '-I',
Line 61: npm error gyp info spawn args '/opt/build/repo/node_modules/isolated-vm/build/config.gypi',
Line 62: npm error gyp info spawn args '-I',
Line 63: npm error gyp info spawn args '/opt/buildhome/.nvm/versions/node/v20.19.6/lib/node_modules/npm/node_modules/node-gyp/addon.gypi'
Line 64: npm error gyp info spawn args '-I',
Line 65: npm error gyp info spawn args '/opt/buildhome/.cache/node-gyp/20.19.6/include/node/common.gypi',
Line 66: npm error gyp info spawn args '-Dlibrary=shared_library',
Line 67: npm error gyp info spawn args '-Dvisibility=default',
Line 68: npm error gyp info spawn args '-Dnode_root_dir=/opt/buildhome/.cache/node-gyp/20.19.6',
Line 69: npm error gyp info spawn args '-Dnode_gyp_dir=/opt/buildhome/.nvm/versions/node/v20.19.6/lib/node_modules/npm/node_modules/node-
Line 70: npm error gyp info spawn args '-Dnode_lib_file=/opt/buildhome/.cache/node-gyp/20.19.6/<(target_arch)/node.lib',
Line 71: npm error gyp info spawn args '-Dmodule_root_dir=/opt/build/repo/node_modules/isolated-vm',
Line 72: npm error gyp info spawn args '-Dnode_engine=v8',
Line 73: npm error gyp info spawn args '--depth=.',
Line 74: npm error gyp info spawn args '--no-parallel',
Line 75: npm error gyp info spawn args '--generator-output',
Line 76: npm error gyp info spawn args 'build',
Line 77: npm error gyp info spawn args '-Goutput_dir=.'
Line 78: npm error gyp info spawn args ]
Line 79: npm error gyp info spawn make
Line 80: npm error gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build', '--jobs', 32 ]
Line 81: npm error In file included from ../src/isolate/holder.h:2,
Line 82: npm error                  from ../src/isolate/remote_handle.h:2,
Line 83: npm error                  from ../src/isolate/util.h:36,
Line 84: npm error                  from ../src/external_copy/external_copy.h:12,
Line 85: npm error                  from ../src/external_copy/serializer.h:2,
Line 86: npm error                  from ../src/external_copy/serializer_nortti.cc:1:
Line 87: npm error ../src/isolate/platform_delegate.h:15:77: error: ‘SourceLocation’ in namespace ‘v8’ does not name a type
Line 88: npm error    15 |                 void PostTaskImpl(std::unique_ptr<v8::Task> task, const v8::SourceLocation& location) override
Line 89: npm error       |                                                                             ^~~~~~~~~~~~~~
Line 90: npm error ../src/isolate/platform_delegate.h:16:109: error: ‘SourceLocation’ in namespace ‘v8’ does not name a type
Line 91: npm error    16 |                 void PostDelayedTaskImpl(std::unique_ptr<v8::Task> task, double delay_in_seconds, const v8::So
Line 92: npm error       |                                                                                                             ^~
Line 93: npm error ../src/isolate/platform_delegate.h:17:89: error: ‘SourceLocation’ in namespace ‘v8’ does not name a type
Line 94: npm error    17 |                 void PostIdleTaskImpl(std::unique_ptr<v8::IdleTask> /*task*/, const v8::SourceLocation& /*loca
Line 95: npm error       |                                                                                         ^~~~~~~~~~~~~~
Line 96: npm error ../src/isolate/platform_delegate.h:15:22: error: ‘void ivm::TaskRunner::PostTaskImpl(std::unique_ptr<v8::Task>, const 
Line 97: npm error    15 |                 void PostTaskImpl(std::unique_ptr<v8::Task> task, const v8::SourceLocation& location) override
Line 98: npm error       |                      ^~~~~~~~~~~~
Line 99: npm error ../src/isolate/platform_delegate.h:15:22: error: initializer specified for non-virtual method ‘void ivm::TaskRunner::P
Line 100: npm error ../src/isolate/platform_delegate.h:16:22: error: ‘void ivm::TaskRunner::PostDelayedTaskImpl(std::unique_ptr<v8::Task>,
Line 101: npm error    16 |                 void PostDelayedTaskImpl(std::unique_ptr<v8::Task> task, double delay_in_seconds, const v8::So
Line 102: npm error       |                      ^~~~~~~~~~~~~~~~~~~
Line 103: npm error ../src/isolate/platform_delegate.h:16:22: error: initializer specified for non-virtual method ‘void ivm::TaskRunner::P
Line 104: npm error ../src/isolate/platform_delegate.h:17:22: error: ‘void ivm::TaskRunner::PostIdleTaskImpl(std::unique_ptr<v8::IdleTask>
Line 105: npm error    17 |                 void PostIdleTaskImpl(std::unique_ptr<v8::IdleTask> /*task*/, const v8::SourceLocation& /*loca
Line 106: npm error       |                      ^~~~~~~~~~~~~~~~
Line 107: npm error ../src/isolate/holder.h:55:77: error: ‘SourceLocation’ in namespace ‘v8’ does not name a type
Line 108: npm error    55 |                 void PostTaskImpl(std::unique_ptr<v8::Task> task, const v8::SourceLocation& /*location*/) fina
Line 109: npm error       |                                                                             ^~~~~~~~~~~~~~
Line 110: npm error ../src/isolate/holder.h:56:109: error: ‘SourceLocation’ in namespace ‘v8’ does not name a type
Line 111: npm error    56 |                 void PostDelayedTaskImpl(std::unique_ptr<v8::Task> task, double delay_in_seconds, const v8::So
Line 112: npm error       |                                                                                                             ^~
Line 113: npm error ../src/isolate/holder.h:57:88: error: ‘SourceLocation’ in namespace ‘v8’ does not name a type
Line 114: npm error    57 |                 void PostNonNestableTaskImpl(std::unique_ptr<v8::Task> task, const v8::SourceLocation& locatio
Line 115: npm error       |                                                                                        ^~~~~~~~~~~~~~
Line 116: npm error ../src/isolate/holder.h:55:22: error: ‘void ivm::IsolateTaskRunner::PostTaskImpl(std::unique_ptr<v8::Task>, const int&
Line 117: npm error    55 |                 void PostTaskImpl(std::unique_ptr<v8::Task> task, const v8::SourceLocation& /*location*/) fina
Line 118: npm error       |                      ^~~~~~~~~~~~
Line 119: npm error ../src/isolate/holder.h:56:22: error: ‘void ivm::IsolateTaskRunner::PostDelayedTaskImpl(std::unique_ptr<v8::Task>, dou
Line 120: npm error    56 |                 void PostDelayedTaskImpl(std::unique_ptr<v8::Task> task, double delay_in_seconds, const v8::So
Line 121: npm error       |                      ^~~~~~~~~~~~~~~~~~~
Line 122: npm error ../src/isolate/holder.h:57:22: error: ‘void ivm::IsolateTaskRunner::PostNonNestableTaskImpl(std::unique_ptr<v8::Task>,
Line 123: npm error    57 |                 void PostNonNestableTaskImpl(std::unique_ptr<v8::Task> task, const v8::SourceLocation& locatio
Line 124: npm error       |                      ^~~~~~~~~~~~~~~~~~~~~~~
Line 125: npm error In file included from ../src/isolate/holder.h:2,
Line 126: npm error                  from ../src/isolate/executor.h:6,
Line 127: npm error                  from ../src/isolate/environment.h:7,
Line 128: npm error                  from ../src/isolate/allocator_nortti.cc:2:
Line 129: npm error ../src/isolate/platform_delegate.h:15:77: error: ‘SourceLocation’ in namespace ‘v8’ does not name a type
Line 130: npm error    15 |                 void PostTaskImpl(std::unique_ptr<v8::Task> task, const v8::SourceLocation& location) override
Line 131: npm error       |                                                                             ^~~~~~~~~~~~~~
Line 132: npm error ../src/isolate/platform_delegate.h:16:109: error: ‘SourceLocation’ in namespace ‘v8’ does not name a type
Line 133: npm error    16 |                 void PostDelayedTaskImpl(std::unique_ptr<v8::Task> task, double delay_in_seconds, const v8::So
Line 134: npm error       |                                                                                                             ^~
Line 135: npm error ../src/isolate/platform_delegate.h:17:89: error: ‘SourceLocation’ in namespace ‘v8’ does not name a type
Line 136: npm error    17 |                 void PostIdleTaskImpl(std::unique_ptr<v8::IdleTask> /*task*/, const v8::SourceLocation& /*loca
Line 137: npm error       |                                                                                         ^~~~~~~~~~~~~~
Line 138: npm error ../src/isolate/platform_delegate.h:15:22: error: ‘void ivm::TaskRunner::PostTaskImpl(std::unique_ptr<v8::Task>, const 
Line 139: npm error    15 |                 void PostTaskImpl(std::unique_ptr<v8::Task> task, const v8::SourceLocation& location) override
Line 140: npm error       |                      ^~~~~~~~~~~~
Line 141: npm error ../src/isolate/platform_delegate.h:15:22: error: initializer specified for non-virtual method ‘void ivm::TaskRunner::P
Line 142: npm error ../src/isolate/platform_delegate.h:16:22: error: ‘void ivm::TaskRunner::PostDelayedTaskImpl(std::unique_ptr<v8::Task>,
Line 143: npm error    16 |                 void PostDelayedTaskImpl(std::unique_ptr<v8::Task> task, double delay_in_seconds, const v8::So
Line 144: npm error       |                      ^~~~~~~~~~~~~~~~~~~
Line 145: npm error ../src/isolate/platform_delegate.h:16:22: error: initializer specified for non-virtual method ‘void ivm::TaskRunner::P
Line 146: npm error ../src/isolate/platform_delegate.h:17:22: error: ‘void ivm::TaskRunner::PostIdleTaskImpl(std::unique_ptr<v8::IdleTask>
Line 147: npm error    17 |                 void PostIdleTaskImpl(std::unique_ptr<v8::IdleTask> /*task*/, const v8::SourceLocation& /*loca
Line 148: npm error       |                      ^~~~~~~~~~~~~~~~
Line 149: npm error ../src/isolate/holder.h:55:77: error: ‘SourceLocation’ in namespace ‘v8’ does not name a type
Line 150: npm error    55 |                 void PostTaskImpl(std::unique_ptr<v8::Task> task, const v8::SourceLocation& /*location*/) fina
Line 151: npm error       |                                                                             ^~~~~~~~~~~~~~
Line 152: npm error ../src/isolate/holder.h:56:109: error: ‘SourceLocation’ in namespace ‘v8’ does not name a type
Line 153: npm error    56 |                 void PostDelayedTaskImpl(std::unique_ptr<v8::Task> task, double delay_in_seconds, const v8::So
Line 154: npm error       |                                                                                                             ^~
Line 155: npm error ../src/isolate/holder.h:57:88: error: ‘SourceLocation’ in namespace ‘v8’ does not name a type
Line 156: npm error    57 |                 void PostNonNestableTaskImpl(std::unique_ptr<v8::Task> task, const v8::SourceLocation& locatio
Line 157: npm error       |                                                                                        ^~~~~~~~~~~~~~
Line 158: npm error ../src/isolate/holder.h:55:22: error: ‘void ivm::IsolateTaskRunner::PostTaskImpl(std::unique_ptr<v8::Task>, const int&
Line 159: npm error    55 |                 void PostTaskImpl(std::unique_ptr<v8::Task> task, const v8::SourceLocation& /*location*/) fina
Line 160: npm error       |                      ^~~~~~~~~~~~
Line 161: npm error ../src/isolate/holder.h:56:22: error: ‘void ivm::IsolateTaskRunner::PostDelayedTaskImpl(std::unique_ptr<v8::Task>, dou
Line 162: npm error    56 |                 void PostDelayedTaskImpl(std::unique_ptr<v8::Task> task, double delay_in_seconds, const v8::So
Line 163: npm error       |                      ^~~~~~~~~~~~~~~~~~~
Line 164: npm error ../src/isolate/holder.h:57:22: error: ‘void ivm::IsolateTaskRunner::PostNonNestableTaskImpl(std::unique_ptr<v8::Task>,
Line 165: npm error    57 |                 void PostNonNestableTaskImpl(std::unique_ptr<v8::Task> task, const v8::SourceLocation& locatio
Line 166: npm error       |                      ^~~~~~~~~~~~~~~~~~~~~~~
Line 167: npm error make: *** [nortti.target.mk:158: Release/obj.target/nortti/src/isolate/allocator_nortti.o] Error 1
Line 168: npm error make: *** Waiting for unfinished jobs....
Line 169: npm error make: *** [nortti.target.mk:158: Release/obj.target/nortti/src/external_copy/serializer_nortti.o] Error 1
Line 170: npm error gyp ERR! build error
Line 171: npm error gyp ERR! stack Error: `make` failed with exit code: 2
Line 172: npm error gyp ERR! stack at ChildProcess.<anonymous> (/opt/buildhome/.nvm/versions/node/v20.19.6/lib/node_modules/npm/node_modul
Line 173: npm error gyp ERR! System Linux 6.1.153-175.280.amzn2023.x86_64
Line 174: npm error gyp ERR! command "/opt/buildhome/.nvm/versions/node/v20.19.6/bin/node" "/opt/buildhome/.nvm/versions/node/v20.19.6/lib
Line 175: npm error gyp ERR! cwd /opt/build/repo/node_modules/isolated-vm
Line 176: npm error gyp ERR! node -v v20.19.6
Line 177: npm error gyp ERR! node-gyp -v v10.1.0
Line 178: npm error gyp ERR! not ok
Line 179: npm error A complete log of this run can be found in: /opt/buildhome/.npm/_logs/2025-12-11T12_04_03_620Z-debug-0.log
Line 180: Error during npm install
Line 181: Failed during stage 'Install dependencies': dependency_installation script returned non-zero exit code: 1
Line 182: Failing build: Failed to install dependencies
Line 183: Finished processing build request in 21.465s